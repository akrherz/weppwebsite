<?php
 /** Erosion Methodology */
 include("../../etc/config.inc.php");
 
 $THISPAGE = "erosion"; include("../../include/header.phtml");
?>
 

<h2>Erosion Modelling Procedure</h2>

<p>This page outlines the procedure by with erosion estimates are generated by this project.  Please don't hestitate to <a href="../contact.phtml">contact us</a> if you have any questions.</p>

<h3>1. Modeling components:</h3>

<p>Our erosion estimates are produced from the WEPP model.  WEPP needs a host of inputs in order to make its estimates.  These inputs are listed here:</p>

<ul>
 <li>Rainfall and climate information.</li>
 <li>Characteristics about the land and its management.</li>
 <li>Characteristics of the management practices.</li>
</ul>

<p>Numerically speaking, the raw counts for each component are:</p>

<div class="table">
<table>
<tr>
 <th>Count:</th>
 <th>Component:</th></tr>

<tr>
 <td>1850</td>
 <td>Model townships</td></tr>

<tr>
 <td>2188</td>
 <td>Different manangements</td></tr>

<tr>
 <td>7988</td>
 <td>HRAP cells which contain breakpoint rainfall and climate information</td></tr>

<tr>
 <td>17848</td>
 <td>Number of NRI points used</td></tr>

<tr>
 <td>90494</td>
 <td>Number of combinations of HRAP cells and NRI points used in our modelling effort</td></tr>

</table>
</div>

<h4>Determining managements:</h4>

<p>The NRI dataset provides us with management information for the years of 1994, 1995, 1996, and 1997.  Our modeling effort begins with the year 1997 and continues through 2004 (8 years).  This means that the four years of managements provided by the NRI dataset are repeated to cover the 8 years.  Like so:</p>

<table>
<tr><th>Model Year:</th><th>NRI Year:</th></tr>
<tr><td>1997</td><td>1997</td></tr>
<tr><td>1998</td><td>1994</td></tr>
<tr><td>1999</td><td>1995</td></tr>
<tr><td>2000</td><td>1996</td></tr>
<tr><td>2001</td><td>1997</td></tr>
<tr><td>2002</td><td>1994</td></tr>
<tr><td>2003</td><td>1995</td></tr>
<tr><td>2004</td><td>1996</td></tr></table>

<h3>2. Cross referencing the components:</h3>

<p>For our modelling effort we are using NRI point data which is given to us with township location information and rainfall information which is given to us on a HRAP grid which is not coincident with the townships.  This creates somewhat of a problem when trying to combine rainfall cells with NRI points we wish to run WEPP for.  Our procedure is to run the total combination of NRI points and HRAP cells within each township to produce a presentative estimate of erosion on the scale of a township.</p>

<h3>3. Our daily erosion estimates:</h3> 

<p>At 12:45 AM each morning, our modelling system (hereafter: WEPP) is invoked and begins the process of modelling yesterday's erosion.  The first step is to request yesterday's precipitation (hereafter: rainfall) information from the University of Iowa's <a href="http://www.iihr.uiowa.edu">IIHR</a> lab.  If this data is not available, the system <i>sleeps</i> for a while before attempting again.  Once the data has been downloaded, the rainfall estimates are processed.</p>

<h4>Processing rainfall estimates:</h4>

<p>The rainfall dataset contains 15 minute estimates of rainfall intensity.  These intensities are processed as if they are actual accumulations, which is a reasonable assumption.  The rainfall information is made available on a grid of HRAP cells.  These cells are checked for rainfall intensities over 5mm/hr and if found, breakpoint information is generated for WEPP and the system 'remembers' these points for later processing.  If smaller intensities are found, 1 breakpoint is generated just to make sure the water balance is accounted for.</p>

<p>This newly processed breakpoint information is merged with our archive of climate and previously processed breakpoint rainfall data.  Climate files suitable for WEPP are then generated and the system is ready to start executing the WEPP model.</p>

<h4>Running the model:</h4>

<p>A python script called <code>proctor.py</code> manages the execution of the WEPP model.  The script interfaces with the database and generates all of the WEPP input files needed to make runs.  Once all of the runs queued for the day are finished, a post-processor parses all of the output files and mines the data away in the database.</p>

<h4>Cleaning up:</h4>

<p>Some system accounting and file clean up is done when the modelling is complete.  Most of these tasks are not worth mentioning here.</p>

<h3>4. Model Runtime</h3>

<p>If all combinations are to be run, the model will take 12 hours to finish on the current hardware we are using.  This does not fit with the timeline of having yesterday's erosion estimates completed by the next morning.  The system has been designed to be distributed to other systems so that multiple machines can be simulataneously working to complete the job queue.  Unfortunately, the system is more IO-bound than CPU-bound, so throwing more processors at the task does not help much.  Changes are coming to the system to spread the diskIO out to more machines.</p>

<?php include("../../include/footer.phtml"); ?>
